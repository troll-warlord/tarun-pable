@import 'tailwindcss';

/* ============================================================
   SECTION 1 — DESIGN TOKEN REGISTRY
   @theme (static):  fonts, custom text-sizes, radii — build-time
   @theme inline:    color aliases → runtime CSS vars — so Tailwind
                     utilities like bg-surface / text-primary
                     reference the live CSS variable at runtime.
   ============================================================ */

/* 1a. Static tokens — these values never change between themes */
@theme {
  /* Font stacks */
  --font-sans: 'Inter', ui-sans-serif, system-ui;
  --font-mono: 'Roboto Mono', ui-monospace, 'SFMono-Regular', monospace;

  /* Custom sub-scale (fills the gap below Tailwind's text-sm=14px) */
  --text-nano: 0.5625rem; /* 9px  — SVG labels, micro badges    */
  --text-code: 0.625rem;  /* 10px — mono badges, btn labels     */
  --text-label: 0.6875rem; /* 11px — section labels, pill text   */
  --text-xs: 0.75rem;     /* 12px — navbar brand, compact UI    */

  /* Semantic border-radius tokens */
  --radius-card: 1rem; /* 16px — bento / main cards          */
  --radius-badge: 0.25rem; /* 4px  — status badges, pills        */
}

/* 1b. Themeable color tokens — Tailwind reads these as utilities:
        bg-primary, text-primary, border-primary,
        bg-surface, bg-base, bg-panel, border-edge,
        text-main, text-body, text-muted                          */
@theme inline {
  --color-primary: var(--clr-primary);
  --color-primary-muted: var(--clr-primary-muted);
  --color-primary-subtle: var(--clr-primary-subtle);

  --color-base: var(--clr-bg-base);
  --color-surface: var(--clr-bg-surface);
  --color-panel: var(--clr-bg-panel);
  --color-edge: var(--clr-edge);

  --color-main: var(--clr-text-main);
  --color-body: var(--clr-text-body);
  --color-muted: var(--clr-text-muted);
}

/* ============================================================
   SECTION 2 — THEME DEFINITIONS
   :root      = Light theme (default / system fallback)
   html.dark  = Dark theme  (active via class="dark" on <html>)
   Dark is the visual default because index.html ships class="dark".
   ============================================================ */
@layer base {
  :root {
    /* --- Accent --- */
    --clr-primary: #047857; /* emerald-700 — richer, higher contrast on light bg */
    --clr-primary-muted: rgba(4, 120, 87, 0.25);
    --clr-primary-subtle: rgba(4, 120, 87, 0.08);
    --clr-primary-dark: #064e3b;

    /* --- Backgrounds --- */
    --clr-bg-base: #d4d4d8;    /* zinc-300 — noticeably grey         */
    --clr-bg-surface: #c8c8ce; /* one step darker for cards/sections */
    --clr-bg-panel: rgba(0, 0, 0, 0.05);

    /* --- Borders --- */
    --clr-edge: #a1a1aa; /* zinc-400 — fully opaque, clearly visible */
    --clr-grid: rgba(0, 0, 0, 0.07); /* very subtle grid lines for light bg */

    /* --- Typography --- */
    --clr-text-main: #09090b; /* zinc-950 — near-black, max contrast */
    --clr-text-body: #27272a; /* zinc-800 — strong readable body text */
    --clr-text-muted: #52525b; /* zinc-600 — visible but recessed */

    /* --- Computed shadows --- */
    --shadow-glow: 0 0 12px var(--clr-primary-muted);
    --shadow-glow-lg: 0 0 32px var(--clr-primary-muted);

    /* --- Mouse tracking (interactive grid effect) --- */
    --mouse-x: 50%;
    --mouse-y: 50%;
  }

  html.dark {
    /* --- Accent --- */
    --clr-primary: #10b981; /* emerald-500 */
    --clr-primary-muted: rgba(16, 185, 129, 0.5);
    --clr-primary-subtle: rgba(16, 185, 129, 0.08);
    --clr-primary-dark: #064e3b;

    /* --- Backgrounds --- */
    --clr-bg-base: #09090b; /* zinc-950 */
    --clr-bg-surface: #18181b; /* zinc-900 */
    --clr-bg-panel: rgba(255, 255, 255, 0.05);

    /* --- Borders --- */
    --clr-edge: rgba(255, 255, 255, 0.08);
    --clr-grid: rgba(255, 255, 255, 0.06); /* same subtle feel as before */

    /* --- Typography --- */
    --clr-text-main: #f4f4f5; /* zinc-100 */
    --clr-text-body: #d4d4d8; /* zinc-300 */
    --clr-text-muted: #71717a; /* zinc-500 */
  }

  html {
    @apply scroll-smooth;
    /* Selection uses primary color and adapts per theme */
    &::selection,
    *::selection {
      background-color: var(--clr-primary-subtle);
      color: var(--clr-text-main);
    }
  }

  body {
    background-color: var(--clr-bg-base);
    color: var(--clr-text-body);
    @apply antialiased font-sans;
  }
}

/* ============================================================
   SECTION 3 — GLOBAL COMPONENT CLASSES
   Rule: Only classes used by 2+ components live here.
   Single-component "skin" classes belong in <style scoped>.
   ============================================================ */
@layer components {
  /* ── Font Loading ────────────────────────────────────────── */
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 300;
    font-display: swap;
    src: url('/fonts/inter-v20-latin-300.woff2') format('woff2');
  }
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: url('/fonts/inter-v20-latin-regular.woff2') format('woff2');
  }
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 600;
    font-display: swap;
    src: url('/fonts/inter-v20-latin-600.woff2') format('woff2');
  }
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 700;
    font-display: swap;
    src: url('/fonts/inter-v20-latin-700.woff2') format('woff2');
  }
   @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 900;
    font-display: swap;
    src: url('/fonts/inter-v20-latin-900.woff2') format('woff2');
  }
  @font-face {
    font-family: 'Roboto Mono';
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: url('/fonts/roboto-v50-latin-regular.woff2') format('woff2');
  }
  @font-face {
    font-family: 'Roboto Mono';
    font-style: normal;
    font-weight: 500;
    font-display: swap;
    src: url('/fonts/roboto-v50-latin-500.woff2') format('woff2');
  }

  /* ── Layout & Containers ─────────────────────────────────── */
  .section-container {
    @apply relative py-24 px-6 md:px-12 lg:px-24 overflow-hidden min-h-screen;
    border-top: 1px solid var(--clr-edge);
  }

  /* Interactive cursor-tracked grid overlay (App.vue) */
  @media (min-width: 768px) {
    .bg-grid {
      @apply absolute inset-0;
      background-image: linear-gradient(var(--clr-grid) 1px, transparent 1px), linear-gradient(90deg, var(--clr-grid) 1px, transparent 1px);
      background-size: 20px 20px;
      transition:
        mask-image 0.3s ease,
        -webkit-mask-image 0.3s ease;
      mask-image: radial-gradient(600px circle at var(--mouse-x) var(--mouse-y), black 0%, rgba(0, 0, 0, 0.1) 100%);
      -webkit-mask-image: radial-gradient(600px circle at var(--mouse-x) var(--mouse-y), black 0%, transparent 100%);
    }

    .grid-glow {
      @apply absolute inset-0;
      background: radial-gradient(400px circle at var(--mouse-x) var(--mouse-y), color-mix(in srgb, var(--clr-primary), transparent 96%), transparent 100%);
    }
  }

  @media (max-width: 767px) {
    .bg-grid,
    .grid-glow {
      display: none;
    }
  }

  /* ── Typography Hierarchy ────────────────────────────────── */
  .heading-xl {
    @apply font-sans font-black text-5xl md:text-7xl lg:text-8xl uppercase tracking-tighter leading-[0.9];
    color: var(--clr-text-main);
  }

  .heading-lg {
    @apply font-sans font-black text-2xl md:text-3xl uppercase tracking-tighter leading-tight;
    color: var(--clr-text-main);
  }

  /* Mono accent label (e.g. "// INIT_PROCESS") */
  .text-mono-label {
    @apply font-mono text-code md:text-label font-bold tracking-[0.3em] uppercase opacity-90;
    color: var(--clr-primary);
  }

  /* Italic muted body copy */
  .text-body-muted {
    @apply text-sm md:text-base leading-relaxed font-medium italic transition-colors;
    color: var(--clr-text-muted);
  }

  /* Section header pair */
  .section-label {
    @apply font-mono text-code md:text-label font-bold uppercase mb-2 opacity-60 tracking-widest;
    color: var(--clr-text-muted);
  }

  .section-heading {
    @apply font-sans font-black text-3xl md:text-6xl uppercase tracking-tighter leading-[0.9] mb-6;
    color: var(--clr-text-main);
  }

  /* Pipe + description layout (SectionHeader.vue) */
  .pipe-description {
    @apply flex items-start gap-4 max-w-2xl;
  }

  .pipe-line {
    @apply w-px h-full min-h-12 mt-1.5 shrink-0;
    background-color: color-mix(in srgb, var(--clr-primary), transparent 60%);
  }

  .description-text {
    @apply text-base md:text-lg leading-relaxed font-medium italic transition-colors opacity-80;
    color: var(--clr-text-muted);
  }

  /* ── Shared Card Architecture ────────────────────────────── */
  /* Base for CertificationCard — hover border + transition */
  .infra-card {
    @apply relative flex flex-col transition-all duration-500;
  }

  .infra-card:hover {
    border-color: var(--clr-primary);
    background-color: color-mix(in srgb, var(--clr-primary), transparent 98%);
  }

  /* Compact tech grid item (used in TechBadge) */
  .tech-pill {
    @apply flex items-center gap-3 px-4 py-2 border rounded-badge transition-all;
    background-color: var(--clr-bg-surface);
    border-color: var(--clr-edge);
  }
  .tech-pill:hover {
    border-color: color-mix(in srgb, var(--clr-primary), transparent 70%);
  }

  /* ── UI Elements ─────────────────────────────────────────── */
  /* Circular status dot — active state used in Hero */
  .status-node {
    @apply w-2 h-2 rounded-full border transition-all duration-500;
  }
  .status-node-active {
    background-color: var(--clr-primary);
    border-color: var(--clr-primary);
    box-shadow: var(--shadow-glow);
  }

  /* Primary CTA button */
  .btn-primary {
    @apply px-6 py-3 font-mono text-code font-bold uppercase tracking-[0.2em] transition-all;
    background-color: color-mix(in srgb, var(--clr-primary-dark, #064e3b), transparent 40%);
    color: var(--clr-text-main);
    border: 1px solid var(--clr-primary);

    &:hover {
      background-color: var(--clr-primary-dark, #064e3b);
    }
  }

  /* Secondary / ghost button */
  .btn-outline {
    @apply px-6 py-3 font-mono text-code font-bold uppercase tracking-[0.2em] transition-all;
    border: 1px solid var(--clr-edge);
    color: var(--clr-text-muted);

    &:hover {
      color: var(--clr-text-main);
      background-color: var(--clr-bg-panel);
    }
  }
}
